<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Minecraft Loading Screen Configurator</title>
    <link rel="icon" href="https://example.com/icon.png" type="image/png">
    <style>
        @font-face {
            font-family: 'Minecraft';
            src: url('https://example.com/minecraft.woff2') format('woff2');
        }
        
        :root {
            --primary: #8C52FF;
            --primary-dark: #6B3CC0;
            --primary-light: #B294FF;
            --secondary: #FF6B35;
            --dark-bg: #0b0210;
            --darker-bg: #07010A;
            --panel-bg: rgba(25, 10, 35, 0.85);
            --text-light: #E2DAF3;
            --text-muted: #A895D6;
            --border-color: rgba(140, 82, 255, 0.3);
            --success: #4CAF50;
            --warning: #FF9800;
            --error: #F44336;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Minecraft', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, var(--darker-bg) 0%, var(--dark-bg) 100%);
            color: var(--text-light);
            min-height: 100vh;
            padding: 20px;
            line-height: 1.6;
            background-attachment: fixed;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: 320px 1fr 320px;
            gap: 20px;
        }
        
        header {
            grid-column: 1 / -1;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
            border-bottom: 2px solid var(--border-color);
            margin-bottom: 20px;
        }
        
        h1 {
            font-size: 2.5rem;
            color: var(--primary);
            text-shadow: 0 0 10px rgba(140, 82, 255, 0.5);
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .logo {
            width: 50px;
            height: 50px;
            background: var(--primary);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .discord-link {
            display: flex;
            align-items: center;
            gap: 10px;
            color: var(--text-light);
            text-decoration: none;
            font-size: 1.1rem;
            transition: all 0.3s ease;
            padding: 10px 20px;
            border-radius: 8px;
            background: rgba(140, 82, 255, 0.1);
            border: 1px solid var(--border-color);
        }
        
        .discord-link:hover {
            color: var(--primary);
            background: rgba(140, 82, 255, 0.2);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
        
        .discord-icon {
            width: 24px;
            height: 24px;
        }
        
        .panel {
            background: var(--panel-bg);
            border-radius: 12px;
            padding: 20px;
            border: 1px solid var(--border-color);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.4);
            height: fit-content;
            max-height: calc(100vh - 100px);
            overflow-y: auto;
            backdrop-filter: blur(5px);
        }
        
        .panel-title {
            font-size: 1.5rem;
            color: var(--primary);
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .panel-title svg {
            width: 24px;
            height: 24px;
        }
        
        .texture-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
            margin-bottom: 20px;
        }
        
        .texture-item {
            width: 100%;
            aspect-ratio: 1;
            border: 2px solid transparent;
            border-radius: 10px;
            overflow: hidden;
            cursor: pointer;
            transition: all 0.2s ease;
            position: relative;
            background: rgba(0, 0, 0, 0.2);
        }
        
        .texture-item:hover {
            border-color: var(--primary);
            transform: scale(1.05);
        }
        
        .texture-item.selected {
            border-color: var(--primary);
            box-shadow: 0 0 0 3px var(--primary), 0 0 20px rgba(140, 82, 255, 0.5);
        }
        
        .texture-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            image-rendering: pixelated;
        }
        
        .texture-name {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(0, 0, 0, 0.8);
            padding: 6px;
            font-size: 0.75rem;
            text-align: center;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }
        
        .btn {
            padding: 12px 18px;
            border-radius: 8px;
            border: none;
            font-family: 'Minecraft', sans-serif;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.2s ease;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        
        .btn-primary {
            background: var(--primary);
            color: white;
        }
        
        .btn-primary:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
        
        .btn-secondary {
            background: rgba(255, 255, 255, 0.1);
            color: var(--text-light);
            border: 1px solid var(--border-color);
        }
        
        .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.2);
        }
        
        .btn-success {
            background: var(--success);
            color: white;
        }
        
        .btn-warning {
            background: var(--warning);
            color: white;
        }
        
        .btn-sm {
            padding: 8px 12px;
            font-size: 0.9rem;
        }
        
        .btn-group {
            display: flex;
            gap: 10px;
            margin-top: 15px;
            flex-wrap: wrap;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            color: var(--text-muted);
            font-size: 1rem;
        }
        
        input, select, textarea {
            width: 100%;
            padding: 12px;
            border-radius: 8px;
            border: 1px solid var(--border-color);
            background: rgba(0, 0, 0, 0.3);
            color: var(--text-light);
            font-family: 'Minecraft', sans-serif;
        }
        
        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(140, 82, 255, 0.3);
        }
        
        .preview-container {
            position: relative;
            width: 100%;
            height: 400px;
            border-radius: 12px;
            overflow: hidden;
            background: linear-gradient(180deg, rgba(10, 5, 12, 0.9), rgba(20, 6, 30, 0.95));
            border: 1px solid var(--border-color);
            box-shadow: 0 10px 35px rgba(0, 0, 0, 0.6);
            margin-bottom: 20px;
        }
        
        .preview-title {
            position: absolute;
            top: 20px;
            left: 20px;
            font-size: 1.4rem;
            color: var(--primary);
            text-shadow: 0 0 5px rgba(0, 0, 0, 0.5);
        }
        
        .preview-logo {
            position: absolute;
            top: 70px;
            left: 50%;
            transform: translateX(-50%);
            width: 300px;
            height: 55px;
            background: linear-gradient(45deg, var(--primary), var(--primary-light));
            border-radius: 8px;
            opacity: 0.8;
        }
        
        .loading-bars {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 300px;
        }
        
        .bar-back {
            width: 100%;
            height: 20px;
            background-color: rgba(0, 0, 0, 0.5);
            border: 2px solid var(--border-color);
            border-radius: 5px;
            overflow: hidden;
        }
        
        .bar-fill {
            height: 100%;
            width: 60%;
            background: linear-gradient(90deg, var(--primary), var(--primary-light));
            border-radius: 3px;
            transition: width 0.5s ease;
        }
        
        .preview-bottom {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            color: var(--text-muted);
            font-size: 1.1rem;
        }
        
        .preview-icons {
            position: absolute;
            bottom: 20px;
            right: 20px;
            display: flex;
            gap: 12px;
        }
        
        .preview-icon {
            width: 35px;
            height: 35px;
            background: var(--primary);
            border-radius: 6px;
            opacity: 0.8;
        }
        
        .items-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-top: 15px;
        }
        
        .item-card {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 10px;
            padding: 15px;
            border: 1px solid var(--border-color);
            transition: all 0.2s ease;
        }
        
        .item-card:hover {
            border-color: var(--primary);
            transform: translateY(-2px);
        }
        
        .item-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 12px;
        }
        
        .item-thumb {
            width: 45px;
            height: 45px;
            border-radius: 6px;
            overflow: hidden;
            background: rgba(0, 0, 0, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .item-thumb img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            image-rendering: pixelated;
        }
        
        .item-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
        }
        
        .export-area {
            margin-top: 20px;
        }
        
        .export-area textarea {
            width: 100%;
            height: 200px;
            margin-top: 15px;
            font-family: monospace;
            resize: vertical;
            background: rgba(0, 0, 0, 0.3);
            padding: 15px;
            border-radius: 8px;
        }
        
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 20px;
            background: var(--primary);
            color: white;
            border-radius: 8px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            transform: translateX(100%);
            transition: transform 0.3s ease;
            z-index: 1000;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .notification.show {
            transform: translateX(0);
        }
        
        .preset-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            margin-top: 15px;
        }
        
        .preset-item {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 8px;
            padding: 15px;
            border: 1px solid var(--border-color);
            cursor: pointer;
            transition: all 0.2s ease;
            text-align: center;
        }
        
        .preset-item:hover {
            border-color: var(--primary);
            transform: translateY(-2px);
        }
        
        footer {
            grid-column: 1 / -1;
            text-align: center;
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid var(--border-color);
            color: var(--text-muted);
        }
        
        @media (max-width: 1200px) {
            .container {
                grid-template-columns: 1fr;
            }
            
            .panel {
                max-height: unset;
            }
        }
    </style>
</head>
<body>

<div class="container">
    <header>
        <h1>
            <div class="logo">M</div>
            Minecraft Loading Screen Configurator
        </h1>
        <a href="https://discord.gg/6FxqdTmxAu" target="_blank" class="discord-link">
            <svg class="discord-icon" viewBox="0 0 24 24" fill="currentColor">
                <path d="M19.27 5.33C17.94 4.71 16.5 4.26 15 4a.09.09 0 0 0-.07.03c-.18.33-.39.76-.53 1.09a16.09 16.09 0 0 0-4.8 0c-.14-.34-.35-.76-.54-1.09c-.01-.02-.04-.03-.07-.03c-1.5.26-2.93.71-4.27 1.33c-.01 0-.02.01-.03.02c-2.72 4.07-3.47 8.03-3.1 11.95c0 .02.01.04.03.05c1.8 1.32 3.53 2.12 5.24 2.65c.03.01.06 0 .07-.02c.4-.55.76-1.13 1.07-1.74c.02-.04 0-.08-.04-.09c-.57-.22-1.11-.48-1.64-.78c-.04-.02-.04-.08-.01-.11c.11-.08.22-.17.33-.25c.02-.02.05-.02.07-.01c3.44 1.57 7.15 1.57 10.55 0c.02-.01.05-.01.07.01c.11.09.22.18.33.25c.04.03.04.09-.01.11c-.52.31-1.07.56-1.64.78c-.04.01-.05.06-.04.09c.32.61.68 1.19 1.07 1.74c.03.01.06.02.09.02c1.72-.53 3.45-1.33 5.25-2.65c.02-.01.03-.03.03-.05c.44-4.53-.73-8.46-3.1-11.95c-.01-.01-.02-.02-.04-.02zM8.52 14.91c-1.03 0-1.89-.95-1.89-2.12s.84-2.12 1.89-2.12c1.06 0 1.9.96 1.89 2.12c0 1.17-.84 2.12-1.89 2.12zm6.97 0c-1.03 0-1.89-.95-1.89-2.12s.84-2.12 1.89-2.12c1.06 0 1.9.96 1.89 2.12c0 1.17-.83 2.12-1.89 2.12z"/>
            </svg>
            Join Discord
        </a>
    </header>

    <!-- Textures Panel -->
    <div class="panel">
        <h2 class="panel-title">
            <svg viewBox="0 0 24 24" fill="currentColor">
                <path d="M12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22A10,10 0 0,1 2,12A10,10 0 0,1 12,2M12,4A8,8 0 0,0 4,12C4,14.09 4.8,16 6.11,17.41L9.88,9.88L17.41,6.11C16,4.8 14.09,4 12,4M12,20A8,8 0 0,0 20,12C20,9.91 19.2,8 17.89,6.59L14.12,14.12L6.59,17.89C8,19.2 9.91,20 12,20M12,12L11.23,11.23L9.76,14.76L12,12M12,12L14.24,9.24L12.77,12.77L12,12Z"/>
            </svg>
            Textures
        </h2>
        <p style="color: var(--text-muted); margin-bottom: 20px;">Click a texture to select it, then click "Add Selected" to add it to your scene.</p>
        
        <div class="texture-grid" id="textureGrid">
            <!-- Textures will be populated by JavaScript -->
        </div>
        
        <div class="btn-group">
            <button id="addSelectedBtn" class="btn btn-primary btn-sm">
                <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor">
                    <path d="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z" />
                </svg>
                Add Selected
            </button>
            <button id="clearAllBtn" class="btn btn-secondary btn-sm">
                <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor">
                    <path d="M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z" />
                </svg>
                Clear All
            </button>
            <button id="randomizeBtn" class="btn btn-warning btn-sm">
                <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor">
                    <path d="M10.59,9.17L5.41,4L4,5.41L9.17,10.58L10.59,9.17M12.83,10.58L19.41,4L20,5.41L13.41,12L12.83,10.58M14.83,12.58L21.41,6L22,7.41L15.41,14L14.83,12.58M6.41,8L5,9.41L10.58,15L12,13.58L6.41,8Z" />
                </svg>
                Randomize
            </button>
        </div>

        <div class="form-group">
            <h3 class="panel-title">Presets</h3>
            <div class="preset-grid">
                <div class="preset-item" data-preset="default">
                    Default
                </div>
                <div class="preset-item" data-preset="minimal">
                    Minimal
                </div>
                <div class="preset-item" data-preset="fancy">
                    Fancy
                </div>
                <div class="preset-item" data-preset="custom">
                    Custom
                </div>
            </div>
        </div>
    </div>

    <!-- Preview Panel -->
    <div class="panel">
        <h2 class="panel-title">
            <svg viewBox="0 0 24 24" fill="currentColor">
                <path d="M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9M12,17A5,5 0 0,1 7,12A5,5 0 0,1 12,7A5,5 0 0,1 17,12A5,5 0 0,1 12,17M12,4.5C7,4.5 2.73,7.61 1,12C2.73,16.39 7,19.5 12,19.5C17,19.5 21.27,16.39 23,12C21.27,7.61 17,4.5 12,4.5Z"/>
            </svg>
            Preview & Settings
        </h2>
        
        <div class="preview-container">
            <div class="preview-title" id="previewTitle">TITLE(?)</div>
            <div class="preview-logo"></div>
            <div class="loading-bars">
                <div class="bar-back">
                    <div class="bar-fill"></div>
                </div>
            </div>
            <div class="preview-bottom" id="previewBottom">Some text at the bottom</div>
            <div class="preview-icons">
                <div class="preview-icon"></div>
                <div class="preview-icon"></div>
                <div class="preview-icon"></div>
            </div>
        </div>
        
        <div class="form-group">
            <label for="previewTitleInput">Title Text</label>
            <input type="text" id="previewTitleInput" value="TITLE(?)">
        </div>
        
        <div class="form-group">
            <label for="previewBottomInput">Bottom Text</label>
            <input type="text" id="previewBottomInput" value="Some text at the bottom">
        </div>
        
        <div class="form-group">
            <label for="waitDuration">Wait Duration (seconds)</label>
            <input type="number" id="waitDuration" value="2" min="0.1" step="0.1">
        </div>
        
        <div class="form-group">
            <label for="barDuration">Loading Bar Duration (seconds)</label>
            <input type="number" id="barDuration" value="2" min="0.1" step="0.1">
        </div>
    </div>

    <!-- Items & Export Panel -->
    <div class="panel">
        <h2 class="panel-title">
            <svg viewBox="0 0 24 24" fill="currentColor">
                <path d="M7,2A2,2 0 0,0 5,4V20A2,2 0 0,0 7,22H17A2,2 0 0,0 19,20V4A2,2 0 0,0 17,2H7M7,4H17V10H7V4M7,12H17V14H7V12M7,16H17V18H7V16Z"/>
            </svg>
            Items & Export
        </h2>
        
        <div class="items-list" id="itemsList">
            <!-- Items will be populated by JavaScript -->
        </div>
        
        <div class="export-area">
            <div class="btn-group">
                <button id="exportBtn" class="btn btn-primary">
                    <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor">
                        <path d="M12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22A10,10 0 0,1 2,12A10,10 0 0,1 12,2M11,16.5L18,9.5L16.59,8.09L11,13.67L7.91,10.59L6.5,12L11,16.5Z"/>
                    </svg>
                    Export JSON
                </button>
                <button id="downloadBtn" class="btn btn-success">
                    <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor">
                        <path d="M5,20H19V18H5M19,9H15V3H9V9H5L12,16L19,9Z"/>
                    </svg>
                    Download
                </button>
                <button id="copyBtn" class="btn btn-secondary">
                    <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor">
                        <path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/>
                    </svg>
                    Copy
                </button>
            </div>
            
            <textarea id="jsonOut" placeholder="Exported JSON will appear here"></textarea>
        </div>
    </div>

    <footer>
        <p>Minecraft Loading Screen Configurator &copy; 2023 | Created with ❤️ for Minecraft UI customization</p>
    </footer>
</div>

<div id="notification" class="notification">
    <svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor">
        <path d="M12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22A10,10 0 0,1 2,12A10,10 0 0,1 12,2M11,16.5L18,9.5L16.59,8.09L11,13.67L7.91,10.59L6.5,12L11,16.5Z"/>
    </svg>
    <span>Copied to clipboard!</span>
</div>

<script>
// Available textures
const availableTextures = [
    "title.png", "loading_bar_background.png", "loading_bar_filler.png", "grass_bar.png",
    "mine_chop_dig_animation.png", "icon_panda.png", "loading_spin.png", "realmsStoriesIconAnimated.png", "worldsIcon.png",
    "icon_unlocked.png", "icon_trending.png", "icon_trailer.png", "icon_trash.png", "language_glyph.png", "lapis.png"
];

// Animation options
const animationOptions = [
    {value: "", label: "(none)"},
    {value: "@hud.pick_axe_animation", label: "pick_axe_animation"},
    {value: "@hud.portal_animation", label: "portal_animation"},
    {value: "@hud.spinner_animation", label: "spinner_animation"},
    {value: "@hud.anim_realms_stories_icon", label: "anim_realms_stories_icon"}
];

// Preset configurations
const presets = {
    default: {
        title: "Minecraft Loading",
        bottomText: "Loading your world...",
        waitDuration: 2,
        barDuration: 2,
        items: [
            {texture: "loading_bar_background.png", size: [200, 16]},
            {texture: "loading_bar_filler.png", size: [200, 16]},
            {texture: "mine_chop_dig_animation.png", size: [30, 30]}
        ]
    },
    minimal: {
        title: "Loading",
        bottomText: "Please wait",
        waitDuration: 1.5,
        barDuration: 1.5,
        items: [
            {texture: "loading_bar_background.png", size: [200, 16]},
            {texture: "loading_bar_filler.png", size: [200, 16]}
        ]
    },
    fancy: {
        title: "Awesome Loading Screen",
        bottomText: "Loading amazing content...",
        waitDuration: 3,
        barDuration: 3,
        items: [
            {texture: "loading_bar_background.png", size: [250, 20]},
            {texture: "loading_bar_filler.png", size: [250, 20]},
            {texture: "mine_chop_dig_animation.png", size: [35, 35]},
            {texture: "realmsStoriesIconAnimated.png", size: [35, 35]},
            {texture: "loading_spin.png", size: [35, 35]}
        ]
    },
    custom: {
        title: "Custom Title",
        bottomText: "Custom text at the bottom",
        waitDuration: 2,
        barDuration: 2,
        items: []
    }
};

// DOM references
const textureGrid = document.getElementById('textureGrid');
const addSelectedBtn = document.getElementById('addSelectedBtn');
const clearAllBtn = document.getElementById('clearAllBtn');
const randomizeBtn = document.getElementById('randomizeBtn');
const itemsList = document.getElementById('itemsList');
const previewTitleInput = document.getElementById('previewTitleInput');
const previewBottomInput = document.getElementById('previewBottomInput');
const previewTitle = document.getElementById('previewTitle');
const previewBottom = document.getElementById('previewBottom');
const waitDurationInput = document.getElementById('waitDuration');
const barDurationInput = document.getElementById('barDuration');
const exportBtn = document.getElementById('exportBtn');
const jsonOut = document.getElementById('jsonOut');
const copyBtn = document.getElementById('copyBtn');
const downloadBtn = document.getElementById('downloadBtn');
const notification = document.getElementById('notification');
const presetItems = document.querySelectorAll('.preset-item');

// State
let selectedTexture = null;
let sceneItems = [];

// Initialize the texture grid
function initTextureGrid() {
    availableTextures.forEach(texture => {
        const textureItem = document.createElement('div');
        textureItem.className = 'texture-item';
        textureItem.dataset.texture = texture;
        
        const img = document.createElement('img');
        // In a real implementation, this would point to actual texture files
        img.src = `data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1MCIgaGVpZ2h0PSI1MCIgdmlld0JveD0iMCAwIDUwIDUwIj48cmVjdCB3aWR0aD0iNTAiIGhlaWdodD0iNTAiIGZpbGw9IiM4QzUyRkYiIG9wYWNpdHk9IjAuMyIvPjx0ZXh0IHg9IjI1IiB5PSIyNSIgZG9taW5hbnQtYmFzZWxpbmU9Im1pZGRsZSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjgiIGZpbGw9IiNFRiI+${texture}</dGV4dD48L3N2Zz4=`;
        img.alt = texture;
        
        const textureName = document.createElement('div');
        textureName.className = 'texture-name';
        textureName.textContent = texture;
        
        textureItem.appendChild(img);
        textureItem.appendChild(textureName);
        
        textureItem.addEventListener('click', () => {
            document.querySelectorAll('.texture-item').forEach(item => {
                item.classList.remove('selected');
            });
            textureItem.classList.add('selected');
            selectedTexture = texture;
        });
        
        textureGrid.appendChild(textureItem);
    });
}

// Add a new item to the scene
function addItemToScene() {
    if (!selectedTexture) {
        showNotification('Please select a texture first');
        return;
    }
    
    const newItem = {
        id: `item_${sceneItems.length + 1}`,
        texture: selectedTexture,
        size: [32, 32],
        position: [0, 0],
        animation: ''
    };
    
    sceneItems.push(newItem);
    renderItemsList();
}

// Clear all items from the scene
function clearAllItems() {
    if (sceneItems.length === 0) return;
    if (!confirm('Are you sure you want to clear all items?')) return;
    
    sceneItems = [];
    renderItemsList();
}

// Randomize the configuration
function randomizeConfig() {
    // Random title and text
    const titles = ["Minecraft World", "Loading Screen", "Awesome Game", "Blocky Adventure", "Pixel Paradise"];
    const texts = ["Loading your world...", "Please wait...", "Generating terrain...", "Almost ready...", "Preparing amazing content..."];
    
    previewTitleInput.value = titles[Math.floor(Math.random() * titles.length)];
    previewBottomInput.value = texts[Math.floor(Math.random() * texts.length)];
    
    // Random durations
    waitDurationInput.value = (Math.random() * 3 + 1).toFixed(1);
    barDurationInput.value = (Math.random() * 3 + 1).toFixed(1);
    
    // Random items
    sceneItems = [];
    const numItems = Math.floor(Math.random() * 5) + 1;
    
    for (let i = 0; i < numItems; i++) {
        const randomTexture = availableTextures[Math.floor(Math.random() * availableTextures.length)];
        sceneItems.push({
            id: `item_${i + 1}`,
            texture: randomTexture,
            size: [Math.floor(Math.random() * 50) + 20, Math.floor(Math.random() * 50) + 20],
            position: [0, 0],
            animation: Math.random() > 0.5 ? animationOptions[Math.floor(Math.random() * (animationOptions.length - 1)) + 1].value : ""
        });
    }
    
    updatePreview();
    renderItemsList();
    showNotification('Randomized configuration!');
}

// Apply a preset configuration
function applyPreset(presetName) {
    const preset = presets[presetName];
    
    previewTitleInput.value = preset.title;
    previewBottomInput.value = preset.bottomText;
    waitDurationInput.value = preset.waitDuration;
    barDurationInput.value = preset.barDuration;
    
    sceneItems = preset.items.map((item, index) => ({
        id: `item_${index + 1}`,
        texture: item.texture,
        size: item.size,
        position: [0, 0],
        animation: ""
    }));
    
    updatePreview();
    renderItemsList();
    showNotification(`Applied ${presetName} preset!`);
}

// Render the items list
function renderItemsList() {
    itemsList.innerHTML = '';
    
    if (sceneItems.length === 0) {
        itemsList.innerHTML = '<p style="color: var(--text-muted); text-align: center; padding: 20px;">No items added yet</p>';
        return;
    }
    
    sceneItems.forEach((item, index) => {
        const itemCard = document.createElement('div');
        itemCard.className = 'item-card';
        
        const itemHeader = document.createElement('div');
        itemHeader.className = 'item-header';
        
        const itemThumb = document.createElement('div');
        itemThumb.className = 'item-thumb';
        
        const thumbImg = document.createElement('img');
        thumbImg.src = `data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgdmlld0JveD0iMCAwIDQwIDQwIj48cmVjdCB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIGZpbGw9IiM4QzUyRkYiIG9wYWNpdHk9IjAuMyIvPjx0ZXh0IHg9IjIwIiB5PSIyMCIgZG9taW5hbnQtYmFzZWxpbmU9Im1pZGRsZSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjgiIGZpbGw9IiNFRiI+SW1hZ2U8L3RleHQ+PC9zdmc+`;
        thumbImg.alt = item.texture;
        
        itemThumb.appendChild(thumbImg);
        
        const itemTitle = document.createElement('div');
        itemTitle.textContent = item.id;
        itemTitle.style.fontWeight = 'bold';
        
        const removeBtn = document.createElement('button');
        removeBtn.className = 'btn btn-secondary btn-sm';
        removeBtn.innerHTML = '&times;';
        removeBtn.addEventListener('click', () => {
            sceneItems.splice(index, 1);
            renderItemsList();
        });
        
        itemHeader.appendChild(itemThumb);
        itemHeader.appendChild(itemTitle);
        itemHeader.appendChild(removeBtn);
        
        const itemContent = document.createElement('div');
        itemContent.className = 'item-content';
        
        const sizeLabel = document.createElement('label');
        sizeLabel.textContent = 'Size:';
        
        const sizeInput = document.createElement('input');
        sizeInput.type = 'text';
        sizeInput.value = `${item.size[0]}x${item.size[1]}`;
        sizeInput.addEventListener('change', (e) => {
            const sizes = e.target.value.split('x');
            if (sizes.length === 2) {
                item.size[0] = parseInt(sizes[0]) || 32;
                item.size[1] = parseInt(sizes[1]) || 32;
            }
        });
        
        const animLabel = document.createElement('label');
        animLabel.textContent = 'Animation:';
        
        const animSelect = document.createElement('select');
        animationOptions.forEach(option => {
            const optElement = document.createElement('option');
            optElement.value = option.value;
            optElement.textContent = option.label;
            if (option.value === item.animation) {
                optElement.selected = true;
            }
            animSelect.appendChild(optElement);
        });
        animSelect.addEventListener('change', (e) => {
            item.animation = e.target.value;
        });
        
        itemContent.appendChild(sizeLabel);
        itemContent.appendChild(sizeInput);
        itemContent.appendChild(animLabel);
        itemContent.appendChild(animSelect);
        
        itemCard.appendChild(itemHeader);
        itemCard.appendChild(itemContent);
        
        itemsList.appendChild(itemCard);
    });
}

// Update the preview
function updatePreview() {
    previewTitle.textContent = previewTitleInput.value;
    previewBottom.textContent = previewBottomInput.value;
}

// Generate JSON configuration
function generateJSON() {
    const config = {
        "$loading_animation_wait_duration": parseFloat(waitDurationInput.value) || 2,
        "$loading_bar_duration": parseFloat(barDurationInput.value) || 2,
        "tip_maybe": {
            "text": previewBottomInput.value.toLowerCase() || "some text at the bottom"
        },
        "maybe_title": {
            "text": previewTitleInput.value || "Title(?)"
        },
        "items": sceneItems.map(item => ({
            "id": item.id,
            "texture": `textures/ui/${item.texture.replace('.png', '')}`,
            "size": item.size,
            "animation": item.animation
        }))
    };
    
    jsonOut.value = JSON.stringify(config, null, 2);
}

// Copy JSON to clipboard
function copyToClipboard() {
    if (!jsonOut.value) {
        showNotification('Please generate JSON first');
        return;
    }
    
    jsonOut.select();
    document.execCommand('copy');
    showNotification('Copied to clipboard!');
}

// Download JSON as file
function downloadJSON() {
    if (!jsonOut.value) {
        showNotification('Please generate JSON first');
        return;
    }
    
    const blob = new Blob([jsonOut.value], { type: 'application/json' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = 'minecraft_loading_config.json';
    document.body.appendChild(a);
    a.click();
    document.body.removeChild(a);
    URL.revokeObjectURL(url);
}

// Show notification
function showNotification(message) {
    notification.querySelector('span').textContent = message;
    notification.classList.add('show');
    
    setTimeout(() => {
        notification.classList.remove('show');
    }, 3000);
}

// Initialize the application
function init() {
    initTextureGrid();
    renderItemsList();
    
    // Event listeners
    addSelectedBtn.addEventListener('click', addItemToScene);
    clearAllBtn.addEventListener('click', clearAllItems);
    randomizeBtn.addEventListener('click', randomizeConfig);
    previewTitleInput.addEventListener('input', updatePreview);
    previewBottomInput.addEventListener('input', updatePreview);
    exportBtn.addEventListener('click', generateJSON);
    copyBtn.addEventListener('click', copyToClipboard);
    downloadBtn.addEventListener('click', downloadJSON);
    
    // Preset event listeners
    presetItems.forEach(preset => {
        preset.addEventListener('click', () => {
            applyPreset(preset.dataset.preset);
        });
    });
    
    // Apply default preset on load
    applyPreset('default');
    
    // Initial preview update
    updatePreview();
}

// Start the application
init();
</script>
</body>
</html>
